<?php

namespace CVEBot;

// A singleton representing the application configuration.
class Config {
    private static $instance;
    private static $config;

    private function __construct() {
        $this->reload();
    }

    // Prevent cloning of the instance
    private function __clone() {
    }

    public static function getInstance() {
        if (static::$instance === null) {
            static::$instance = new static();
        }

        return static::$instance;
    }

    public function reload() {
        $newConfig = @parse_ini_file(__DIR__ . '/../../config.ini', true);

        if ($newConfig !== FALSE) {
            static::$config = $newConfig;
        }

        return $newConfig !== FALSE;
    }

    public function getData() {
        return static::$config;
    }
}
